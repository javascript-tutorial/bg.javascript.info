# Въведение в JavaScript

Нека да видим какво е специалното относно JavaScript-а, какво можем да постигнем с него и кои други технологии си играят с него.

## Какво е JavaScript ?

*JavaScript* първоначално е създаден *"за да направи уеб страниците живи"*.

Програмите с този език са наречени *скриптове*. Те могат да се пишат направо в HTML-а на уеб страницата и да се зареждате автоматично когато страницата се зареди.

Скриптовете са предоставени и изпълнени като обикновен текст. Не им е необходимо специална подготовка или компилация за да се пускат.

В този аспект, JavaScript е много по-различен от езика наречен [Java](https://en.wikipedia.org/wiki/Java_(programming_language)).

```smart header="Why <u>Java</u>Script?"
Когато JavaScript е създаден, първоначално е имало друго име: "LiveScript". Но Java-та е била много популярна по това време, и така създателите на езика решили позиционирането на този нов език като "малко братче" на Java-та евентуално да му помогне.

В момента езика JavaScript се разви драстично и стана напълно независим език със собствена спецификация, наречена [ECMAScript](http://en.wikipedia.org/wiki/ECMAScript), и сега тя изобщо няма отношение към Java.
```

Съвременния JavaScript може да се изпълни не само в браузъра, но и в сървъри, така и във всяко устройство, което има специална програма наречена [the JavaScript engine](https://en.wikipedia.org/wiki/JavaScript_engine).

Браузърът има вграден двигател, понякога наричан "JavaScript virtual machine".

Различните двигатели имат различни "кодови имена". Например:

- [V8](https://en.wikipedia.org/wiki/V8_(JavaScript_engine)) -- в браузърите Chrome и Opera.
- [SpiderMonkey](https://en.wikipedia.org/wiki/SpiderMonkey) -- в браузъра Firefox.
- ...Има и други кодови имена като "Trident" и "Chakra" за различните версии на браузъра IE, "ChakraCore" за браузъра Microsoft Edge, "Nitro" и "SquirrelFish" за браузъра Safari, и т.н.

Хубаво е да запомните термините по-горе, защото са използвани в статиите на разрабочиците в интернет. Ние също ще ги използваме. Например, ако "свойство Х е поддържан от V8", то вероятно ще работи в браузърите Chrome и Opera.

```smart header="How do engines work?"

Двигателите са сложни, но основното им е лесно.

1. Двигателят (вградет ако е браузър) чете ("анализира") скрипта.
2. Тогава го конвертира ("компилира") скрипт-а в машинен език.
3. И след тогава машинния код се изпълнява доста бързо.

Вдигателят прилага оптимизации във всяка стъпка от процеса. Даже гледа компилирания скрипт, което се изпълнява, анализира данните, които протичат през него и прилага оптимазиции на машинния код на база тези данни. Когато всичко е готово скрипт-ът се изпълнява доста бързо.
```

## Какво може JavaScript в браузъра ?

Модерният JavaScript е "безопасен" програмен език. То не предоставя ниско ниво на достъп на паметта и процесора, защото първоначално е създаден за браузърите, които не изискват подобно нещо.

Способностите на JavaScript-a силно зависят от средата, която се изпълнява. Например [Node.js](https://wikipedia.org/wiki/Node.js) поддържа функции, които позволяват на JavaScript-а да чете/пише случайни файлове, да изпълнява мрежови заявки и т.н.

JavaScript-a в браузъра може да направи всичко относно манипулирането на уеб страниците, взаимодействието с потребителите и със сървъра.

Например, в браузърите, JavaScript е способен на:

- Да добави HTML код на страницата.
- Да променя съществуващото съдържание на страниците.
- Да променя стилизацията.
- Да реагира на действията на потребителя: при кликане на мишката, при натискане на бутон или просто задвижване на показателя.
- Да изпраща заявки чрез интернет към отдалечени сървъри (т.нар. [AJAX заявки](https://en.wikipedia.org/wiki/Ajax_(programming)) и [COMET](https://en.wikipedia.org/wiki/Comet_(programming)) technologies).
- Да изтегля и да качва файлове.
- Да изтегля и да установи бисквити.
- Да пита посетителите и да им покаже съобщения.
- Да запомни данните от страната на клиента (т.нар. "local storage" - локално хранилище).

## Какво не може JavaScript-а в браузъра?

Възможностите на JavaScript-a в браузъра са ограничени заради безопасността на потребителя. Целта е да се предотврати на зловредните страници достъпът на личната информация на потребителите или навреждането на данните на потребителите.

Примерите на такива ограничения вкючват:
Examples of such restrictions include:

- JavaScript-а от уеб страницата не може да чете/запише случайни файлове в харддиск-а, да ги копира или да стартира/изпълнява програми. То няма директен достъп до функциите на операционната система.

    Модерните браузъри позволяват работата с файлове, но достъпът им е ограничен. Браузърът могат да има достъп само ако потребителят направи определени действия, като "дроп-ване" на файл в браузъра или избирането на даден файл чрез `<input>` tag-а.

    Има начини то да взаимодейства с камера/микрофон и други устройства, но те изискват разрешение от потребителя. И така, страниците с активиран JavaScript не могат подло да активират камерата, да наблюдават околноста и да праща тези данни на [Агенцията за Национална Сигурност](https://bg.wikipedia.org/wiki/%D0%90%D0%B3%D0%B5%D0%BD%D1%86%D0%B8%D1%8F_%D0%B7%D0%B0_%D0%BD%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%B0%D0%BB%D0%BD%D0%B0_%D1%81%D0%B8%D0%B3%D1%83%D1%80%D0%BD%D0%BE%D1%81%D1%82).

- Различните табове/прозорци в общи линии не знаят за един друг. Понякога да, например когато един прозорец използва JavaScript за да отвори друг. Но дори тогава, JavaScript-а от едната страница може и да няма достъп до другия ако са от различни страници (от различни домейни,протоколи или порти)

    Това е наречено "Same Origin Policy" или Същинска Политика за Произход. За да проработи това, *и двете страници* трябва да се съгласят за обмен на данни и да съдържат специален JavaScript код, който се справя с това. Ще разгледаме това по-късно в ръководството.

    Това ограничение, отново, е за безопасността на потребителите. Например страницата с адрес `http://anysite.com`, което потребителят е отворил не би трябвало да има достъп до друг таб в браузъра с URL адрес `http://gmail.com`, който да краде информацията от там.

- JavaScript-а много лесно може да комуникира, чрез интернет, със сървъра откъдето текущата страница произлиза. Но способнастите му да извлича данни от други страници/домейни е усложнен. Макар и възможно, то се нуждае от изрично съгласие (описано в HTTP заявките) от отдалечената страна. Отново, това са обезопасителни ограничения.

![](limitations.svg)

Такива ограничения не съществуват ако JavaScript-a е използван извън браузъра, например в сървърите. Също, модерните браузъри имат плъгин-и/разширения, които биха питали за допълнителни разрешения.

## Какво прави JavaScript-a уникален?

Има поне *три* чудесни неща относно JavaScript:

```compare
+ Пълна интеграция с HTML и CSS.
+ Простите неща се правят просто.
+ Поддържан от основните браузъри и е активиран по подразбиране.
```

JavaScript е единствената браузърна технология, който комбинира всичките тези три неща.

Това е което прави JavaScript-а толкова уникален. Затова е толкова широк разпространен инструмент за създаване на браузърни интерфейси.

Също така, JavaScript ни позволява за създаването на сървъри, мобилни приложения и други.

## Езици "над" JavaScript

Синтаксисът на JavaScript-a не отговаря на нуждите на всеки. Различните хора искат различни качества.

Това е очаквано, защото проектите и изискванията са различни за всеки.

Така наскоро се появи множество нови езици, които са *transpiled* (преобразувани) в JavaScript, преди да стартират в браузъра.

Съвременните инструменти правят транспилацията много бърза и прозрачна, като всъщност позволяват на разработчиците да кодират на друг езици и автоматично да го конвертират "под капака'.

Примери на такива езици са:

- [CoffeeScript](http://coffeescript.org/) е "синтактичната захар" за JavaScript. То въвежда по-къс синтаксис като ни позволява да пишем по-четим и прецизен код. Обикновенно Ruby разработчиците го харесват.
- - [TypeScript](http://www.typescriptlang.org/) e език съсредоточен да добави "писане на стрикни типове данни" за да опрости разработване и поддръжката на сложни системи. Разработва се от Microsoft.
- [Flow](http://flow.org/) също добавя типизирани данни, но по по-различен начин. Разработва се от Facebook.
- [Dart](https://www.dartlang.org/) е самостоятелен език, което си има свобствен двигател, което работи в не-браузърни среди (като мобилни приложения), но също може да се транспилира до JavaScript. Разработва се от Google.

Има и други. Разбира се, дори да използваме един от транспилираните езици, ние също трябва да знаем JavaScript, за да разберем наистина какво правим.

## Обобщение

- JavaScript първоначално е създаден като "език за браузъра", но в момента се използва и много други среди.
- Настоящем, JavaScript има уникалната позиция като най-широко разпространения език с пълна интеграция с HTML и CSS.
- Има много езици, които се "транспилират" в JavaScript код и предоставят определени подобрения. Препоръчително е да се погледнат, поне за кратко, след като овладеете JavaScript-a.
  
