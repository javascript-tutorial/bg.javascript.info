# Nullish coalescing operator - Нулев условен оператор '??'

[recent browser="new"]

Нулевия условен оператор `??` осигурява кратък синтаксис за избор на първата "дефиниранина" променлива от дадения лист.

Резултатът от `a ?? b` е:
- `a` ако не е `null` или `undefined`,
- `b`, в противен случай.

Така, `x = a ?? b` е кратък еквивалент на:

```js
x = (a !== null && a !== undefined) ? a : b;
```

Ето един по-дълъг пример.

Представете си, че ние имаме потребители и те имат променливите `firstName`, `lastName` и `nickName` за тяхното първо име, фамилно име и прякор.Всички те могат да бъдат `undefined`, ако потребителят реши да не въвежда никаква стойност.

Бихме искали да покажем потребителското име: една от тези три променливи или да покажем „Anonymous“, ако нищо не е зададено.

Нека използваме `??` оператора, за да изберете първия дефиниран:

```js run
let firstName = null;
let lastName = null;
let nickName = "Supercoder";

// показва първата ненулева / неопределена стойност
*!*
alert(firstName ?? lastName ?? nickName ?? "Anonymous"); // Supercoder
*/!*
```

## Сравнение с ||

ИЛИ `||` операторът може да се използва по същия начин като `??`. Всъщност можем да заменим `??` с `||` в кода по-горе и да получим същия резултат, както беше описано в [предишната глава](info:logical-operators#or-finds-the-first-truthy-value).

Важната разлика е в това:
- `||` връща първия *вярна* стойност.
- `??` връща първия *дефинирана* стойност.

Това е много важно, когато искаме да сравним `null/undefined` от `0`.

Например, помислете за това:

```js
height = height ?? 100;
```

Това определя `height` на `100` ако то не е дефиниран.

Нека го сравним с `||`:

```js run
let height = 0;

alert(height || 100); // 100
alert(height ?? 100); // 0
```

<<<<<<< HEAD
Тук, `height || 100` третира нулевата височина като неустановена, също като `null`, `undefined` или всяка друга невярна стойност. Така нулата става `100`.

Кодът `height ?? 100` връща `100` само ако `height` е точно `null` или `undefined`. Така че нулата остава "както си е".

Кое поведение е по-добре зависи от конкретния случай на употреба. Когато нулевата височина е валидна стойност, което не трябва да пипаме, тогава `??` е за предпочитане.
=======
Here, `height || 100` treats zero height as unset, same as `null`, `undefined` or any other falsy value. So the result is `100`.

The `height ?? 100` returns `100` only if `height` is exactly `null` or `undefined`. So the `alert` shows the height value `0` "as is".

Which behavior is better depends on a particular use case. When zero height is a valid value, then `??` is preferrable.
>>>>>>> b0464bb32c8efc2a98952e05f363f61eca1a99a2

## Предимства

<<<<<<< HEAD
Предимствата на оператора `??` са доста ниски: `7` в [MDN таблицата](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence#Table).
=======
The precedence of the `??` operator is rather low: `5` in the [MDN table](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence#Table).
>>>>>>> b0464bb32c8efc2a98952e05f363f61eca1a99a2

Така `??` се оценява след повечето други операции, но преди `=` и `?`.

Ако трябва да изберем стойност с `??` в сложен израз, помислете за добавяне на скоби:

```js run
let height = null;
let width = null;

// важно:използвайте скоби
let area = (height ?? 100) * (width ?? 50);

alert(area); // 5000
```

Иначе,ако пропуснем скоби, `*` има по-голямото предимство от `??` и ще се изпълни пръв.

Това би било същото като:

```js
// вероятно не е правилно
let area = height ?? (100 * width) ?? 50;
```

Има и свързани ограничения на ниво език.

**Поради причини по безопасността, забранено е да се използва `??` заедно с операторите `&&` и `||`.**

Кодът по-долу задейства синтаксична грешка:

```js run
let x = 1 && 2 ?? 3; // Синтаксична грешка
```

Ограничението със сигурност е спорно, защото беше добавен към спецификацията на езика с цел да се избегнат грешки в програмирането, тъй като хората започнаха да преминават към `??` от `||`.

Използвайте изрични скоби, за да го заобиколите:

```js run
*!*
let x = (1 && 2) ?? 3; // Работи
*/!*

alert(x); // 2
```

## Обобщение

- Нулевия условен оператор `??` предоставя кратък начин за избор на "дефиниранина" променлива от даден лист.

    Използва се за задаване на стойности по подразбиране на променливи:

    ```js
    // задава height=100, ако height е null или undefined
    height = height ?? 100;
    ```

- Операторът `??` има много ниско предимство, малко по-висока от `?` и `=`.
- Забранено е използването му с `||` или `&&` без изрични скоби.
